mode: rule
mixed-port: 7897
allow-lan: false
log-level: error
ipv6: true
# external-controller: 127.0.0.1:59090
# secret: ''
# external-controller-cors:
#  allow-private-network: true
#  allow-origins:
#  - '*'
unified-delay: true
tcp-concurrent: true
dns:
  default-nameserver:
  - system
  - 77.88.8.8
  - 8.8.8.8
  direct-nameserver-follow-policy: false
  enable: true
  enhanced-mode: fake-ip # redir-host  or fake-ip
  fake-ip-filter:
  # LAN домены
  - '+.lan'
  - '+.localdomain'
  - '+.example'
  - '+.invalid'
  - '+.localhost'
  - '+.test'
  - '+.local'
  - '+.home.arpa'
  - '+.direct'
    
  # NTP сервисы (синхронизация времени)
  - 'time.*.com'
  - 'time.*.gov'
  - 'time.*.edu.cn'
  - 'time.*.apple.com'
  - 'time-ios.apple.com'
  - 'time1.*.com'
  - 'time2.*.com'
  - 'time3.*.com'
  - 'time4.*.com'
  - 'time5.*.com'
  - 'time6.*.com'
  - 'time7.*.com'
  - 'ntp.*.com'
  - 'ntp1.*.com'
  - 'ntp2.*.com'
  - 'ntp3.*.com'
  - 'ntp4.*.com'
  - 'ntp5.*.com'
  - 'ntp6.*.com'
  - 'ntp7.*.com'
  - '+.time.edu.cn'
  - '+.ntp.org.cn'
  - '+.pool.ntp.org'
    
  # Microsoft сервисы
  - '+.msftconnecttest.com'
  - '+.msftncsi.com'
  - '+.microsoft.com'
  - '+.microsoftonline.com'
  - '+.office.com'
  - '+.office365.com'
  - '+.outlook.com'
  - '+.live.com'
  - '+.hotmail.com'
  - '+.xbox.com'
  - '+.xboxlive.com'
  - '+.gamepass.com'
    
  # Игровые платформы
  - '+.steamcontent.com'
  - '+.steampowered.com'
  - '+.steamcommunity.com'
  - '+.steamstatic.com'
  - '+.srv.nintendo.net'
  - '+.n.n.srv.nintendo.net'
  - '+.cdn.nintendo.net'
  - '+.stun.playstation.net'
  - '+.playstation.net'
  - '+.playstation.com'
  - 'xbox.*.*.microsoft.com'
  - '+.*.xboxlive.com'
  - 'xbox.*.microsoft.com'
  - 'xnotify.xboxlive.com'
  - '+.battle.net'
  - '+.blizzard.com'
  - '+.epicgames.com'
  - '+.unrealengine.com'
    
  # STUN сервисы
  - 'stun.*.*'
  - 'stun.*.*.*'
  - '+.stun.*.*'
  - '+.stun.*.*.*'
  - '+.stun.*.*.*.*'
  - '+.stun.*.*.*.*.*'
  
  # Google сервисы
  - '+.google.com'
  - '+.googleapis.com'
  - '+.googleusercontent.com'
  - '+.googlevideo.com'
  - '+.gstatic.com'
  - '+.googletagmanager.com'
  - '+.googleadservices.com'
  - '+.googlesyndication.com'
  - '+.youtube.com'
  - '+.ytimg.com'
  - '+.youtu.be'
  - '+.android.com'
  - '+.gvt1.com'
  - '+.gvt2.com'
  - '+.gvt3.com'
  - '+.googlecloud.com'
  - '+.firebase.com'
  - '+.firebaseio.com'
  - '+.fcm.googleapis.com'
  
  # Apple сервисы
  - '+.apple.com'
  - '+.icloud.com'
  - '+.itunes.apple.com'
  - '+.apps.apple.com'
  
  # Meta экосистема
  - '+.facebook.com'
  - '+.fbcdn.net'
  - '+.instagram.com'
  - '+.cdninstagram.com'
  - '+.whatsapp.com'
  - '+.whatsapp.net'
  - '+.oculus.com'
  - '+.oculuscdn.com'
  
  # Мессенджеры и соцсети
  - '+.telegram.org'
  - '+.t.me'
  - '+.tdesktop.com'
  - '+.telegra.ph'
  - '+.discord.com'
  - '+.discordapp.com'
  - '+.discord.gg'
  - '+.discordcdn.com'
  - '+.tiktok.com'
  - '+.tiktokcdn.com'
  - '+.bytedance.com'
  - '+.musical.ly'
  
  # AI и развлекательные сервисы
  - '+.openai.com'
  - '+.chatgpt.com'
  - 'chat.openai.com'
  - 'api.openai.com'
  - '+.netflix.com'
  - '+.nflximg.net'
  - '+.nflxvideo.net'
  - '+.nflxso.net'
  - '+.spotify.com'
  - '+.spotifycdn.com'
  - '+.scdn.co'
  
  # Банковские и финансовые сервисы
  - '+.sberbank.ru'
  - '+.vtb.ru'
  - '+.alfabank.ru'
  - '+.tinkoff.ru'
  - '+.gosuslugi.ru'
  - '+.mos.ru'
  - '+.paypal.com'
  - '+.visa.com'
  - '+.mastercard.com'
  
  # Антивирусы и системы безопасности
  - '+.kaspersky.com'
  - '+.avast.com'
  - '+.avg.com'
  - '+.eset.com'
  - '+.norton.com'
  - '+.mcafee.com'
  
  # Китайские производители
  - '+.market.xiaomi.com'
  - '+.miui.com'
  - '+.mi.com'
  - '+.huawei.com'
  - '+.vmall.com'
  - '+.oppo.com'
  - '+.vivo.com'
  
  # Операторы связи и Wi-Fi calling
  - '+.3gppnetwork.org'
  - '+.ims.mnc*.mcc*.3gppnetwork.org'
  
  # CDN и облачные сервисы
  - '+.cloudflare.com'
  - '+.cloudflaressl.com'
  - 'cloudflare-ech.com'
  - '+.amazonaws.com'
  - '+.azure.com'
  - '+.azureedge.net'
  
  # Дополнительные системные домены
  - '+.msftconnecttest.com'
  - '+.connectivitycheck.gstatic.com'
  - 'captive.apple.com'
  - 'detectportal.firefox.com'
  fake-ip-filter-mode: blacklist
  fake-ip-range: 198.18.0.1/16
  #fallback:
  #- https://hostingvds-mon.ydns.eu:8443/dns-query
  #- https://vdska-fin.ydns.eu/dns-query
  #fallback-filter:
  #  domain:
  #  - +.google.com
  #  - +.facebook.com
  #  - +.youtube.com
  #  geoip: false
  #  geoip-code: RU
  #  ipcidr:
  #  - 240.0.0.0/4
  #  - 0.0.0.0/32
  listen: :10053
  nameserver:
  - https://hostingvds-mon.ydns.eu:8443/dns-query
  - https://vdska-fin.ydns.eu/dns-query
  prefer-h3: true
  proxy-server-nameserver:
  - https://hostingvds-mon.ydns.eu:8443/dns-query
  - https://vdska-fin.ydns.eu/dns-query
  respect-rules: false
  use-hosts: false
  use-system-hosts: false
profile:
  store-selected: true
  store-fake-ip: true
tun:
  enable: true
  stack: gvisor
  mtu: 9000
  auto-route: true
  strict-route: true
  gso: true
  gso-max-size: 65536
  udp-timeout: 300
  iproute2-table-index: 2022
  iproute2-rule-index: 9000
  endpoint-independent-nat: false
  auto-detect-interface: true
  dns-hijack:
  - any:53
  - tcp://any:53
  device: utun0
  route-exclude-address:
  - 0.0.0.0/8
  - 100.64.0.0/10
  - 127.0.0.0/8
  - 169.254.0.0/16
  - 172.16.0.0/12
  - 192.0.0.0/24
  - 192.0.2.0/24
  - 192.88.99.0/24
  - 192.168.0.0/16
  - 198.51.100.0/24
  - 203.0.113.0/24
  - 224.0.0.0/4
  - 255.255.255.255/32
  - 239.255.255.250/32

#geox-url:
#  geoip: "https://fastly.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@release/geoip.dat"
#  geosite: "https://fastly.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@release/geosite.dat"
#  mmdb: "https://fastly.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@release/geoip.metadb"
#  asn: "https://github.com/xishang0128/geoip/releases/download/latest/GeoLite2-ASN.mmdb"
#geo-auto-update: true
#geo-update-interval: 86400

#  TCP keep alive interval
#  15  для компьютера
#  1800 для телефона, увеличение интервала экономит батарею 
keep-alive-interval: 120
keep-alive-idle: 120

sniffer:
  enable: true
  sniff:
    QUIC:
      ports: [ 443 ]
    TLS:
      ports: [443, 8443]
    HTTP:
      ports: [80, 8080-8880]
      override-destination: true
  skip-domain:
    # LAN домены - полностью переносим
    - '+.lan'
    - '+.localdomain'
    - '+.example'
    - '+.invalid'
    - '+.localhost'
    - '+.test'
    - '+.local'
    - '+.home.arpa'
    - '+.direct'
    
    # NTP сервисы - полностью переносим (UDP протокол)
    - 'time.*.com'
    - 'time.*.gov'
    - 'time.*.edu.cn'
    - 'time.*.apple.com'
    - 'time-ios.apple.com'
    - 'time1.*.com'
    - 'time2.*.com'
    - 'time3.*.com'
    - 'time4.*.com'
    - 'time5.*.com'
    - 'time6.*.com'
    - 'time7.*.com'
    - 'ntp.*.com'
    - 'ntp1.*.com'
    - 'ntp2.*.com'
    - 'ntp3.*.com'
    - 'ntp4.*.com'
    - 'ntp5.*.com'
    - 'ntp6.*.com'
    - 'ntp7.*.com'
    - '+.time.edu.cn'
    - '+.ntp.org.cn'
    - '+.pool.ntp.org'
    
    # STUN сервисы - полностью переносим (UDP протокол)
    - 'stun.*.*'
    - 'stun.*.*.*'
    - '+.stun.*.*'
    - '+.stun.*.*.*'
    - '+.stun.*.*.*.*'
    - '+.stun.*.*.*.*.*'
    
    # Push-уведомления и системные проверки
    - "+.push.apple.com"
    - "captive.apple.com"
    - "ocsp.apple.com"
    - "ocsp2.apple.com"
    - "mesu.apple.com"
    - "swscan.apple.com"
    - "swquery.apple.com"
    - "swdownload.apple.com"
    - "swcdn.apple.com"
    - "swdist.apple.com"
    - "configuration.apple.com"
    - "setup.icloud.com"
    - "p*.mail.icloud.com"
    - '+.fcm.googleapis.com'
    - '+.android.googleapis.com'
    - '+.msftconnecttest.com'
    - '+.msftncsi.com'
    - 'captive.apple.com'
    - 'detectportal.firefox.com'
    - '+.connectivitycheck.gstatic.com'
  skip-src-address:
    - "10.0.0.0/8"
    - "172.16.0.0/12"
    - "192.168.0.0/16"
    - "127.0.0.0/8"
  skip-dst-address:
    - "10.0.0.0/8"
    - "172.16.0.0/12"
    - "192.168.0.0/16"
    - "127.0.0.0/8"
    - "224.0.0.0/4"

proxies:
  #- name: "HostingVDS-AnyTLS"
  #  type: anytls
  #  server: 185.56.162.219
  #  port: 443
  #  password: "wDRp8/cK4TIlLl6z2t/RrgtUu1lkIQ0nCi9lzwudZRY="
  #  client-fingerprint: chrome
  #  udp: true
  #  idle-session-check-interval: 30
  #  idle-session-timeout: 30
  #  min-idle-session: 0
  #  sni: "hostingvds-msk.ddns.net"
  #  alpn:
  #    - h2
  #    - http/1.1
  #  skip-cert-verify: false
  - name: "HostingVDS-Hys"
    type: hysteria2
    server: 185.56.162.219
    port: 8443
    ip-version: ipv6-prefer
    #ports: 443-8443
    password: E1RVby4ynw4nMh/uJh3kYg==
    #up: "1000 Mbps"
    #down: "1000 Mbps"
    sni: hostingvds-msk.ddns.net
    skip-cert-verify: false
    #fingerprint: chrome
    alpn:
      - h3
  - name: "HostingVDS-SS"
    type: ss
    server: 185.56.162.219
    port: 64098
    cipher: 2022-blake3-chacha20-poly1305
    password: "JiseLYppy7GuCUleVVgfPo0PZQsQofeVG9OXzgdi4+c="
    udp: true
    ip-version: ipv6-prefer  
  - name: "HostingVDS"
    type: vless
    server: 185.56.162.219
    port: 443
    ip-version: ipv6-prefer
    uuid: e4cb6eca-18d4-48d5-9562-86a5e8740d07
    network: ws
    ws-opts:
      path: /Video-data
      headers:
        Host: hostingvds-msk.ddns.net
      v2ray-http-upgrade: true
    tls: true
    client-fingerprint: chrome
    udp: true
    tcp-fast-open: true 
  - name: "HostingVDS-VM"
    type: vmess
    server: 185.56.162.219
    port: 64358
    uuid: c3255d49-443d-46cb-83d5-d8d88b816444
    alterId: 0
    ip-version: ipv6-prefer
    cipher: chacha20-poly1305 # security в исходном конфиге
    network: ws
    ws-opts:
      path: /Video-data
      headers:
        Host: 185.56.162.219
      v2ray-http-upgrade: true
    tls: false # В исходном конфиге нет TLS для VMess
    udp: true
    tcp-fast-open: true
  - name: "Aeza"
    type: vless
    server: 85.192.24.24
    port: 443
    ip-version: ipv6-prefer
    uuid: 644cd9d2-58ac-449c-883c-6a1afa9fd8d3
    network: ws
    ws-opts:
      path: /Video-data
      headers:
        Host: aeza-de.ddns.net
      v2ray-http-upgrade: true
    tls: true
    client-fingerprint: chrome
    udp: true
    tcp-fast-open: true
  - name: "Aeza-VM"
    type: vmess
    server: 85.192.24.24
    port: 63215
    ip-version: ipv6-prefer
    uuid: 69bc3848-e47f-45ed-9a37-0e5f5f319c1c
    alterId: 0
    cipher: chacha20-poly1305
    network: ws
    ws-opts:
      path: /Video-data
      headers:
        Host: 85.192.24.24
      v2ray-http-upgrade: true
    tls: false
    udp: true
    tcp-fast-open: true
  - name: "HostVDS"
    type: vless
    server: 188.130.206.28
    port: 443
    ip-version: ipv6-prefer
    uuid: d8003fcf-e9fc-4e64-9e57-12f51d02dede
    network: ws
    ws-opts:
      path: /Video-data
      headers:
        Host: hostvds.ddns.net
      v2ray-http-upgrade: true
    tls: true
    client-fingerprint: chrome
    udp: true
    tcp-fast-open: true
  - name: "HostVDS-VM"
    type: vmess
    server: 188.130.206.28
    port: 65319
    ip-version: ipv6-prefer
    uuid: 86e1eae2-69c3-4fbe-a9b2-203d0f87f54c
    alterId: 0
    cipher: chacha20-poly1305
    network: ws
    ws-opts:
      path: /Video-data
      headers:
        Host: 188.130.206.28
      v2ray-http-upgrade: true
    tls: false
    udp: true
    tcp-fast-open: true
  - name: "H2nexus-F"
    type: vless
    server: 45.144.52.52
    port: 443
    ip-version: ipv6-prefer
    uuid: b68ab9f0-60a2-43bb-befb-ea72cc9400b2
    network: ws
    ws-opts:
      path: /Video-data
      headers:
        Host: h2nexus.ddns.net
      v2ray-http-upgrade: true
    tls: true
    client-fingerprint: chrome
    udp: true
    tcp-fast-open: true
  - name: "H2nexus-VM-F"
    type: vmess
    server: 45.144.52.52
    port: 65309
    ip-version: ipv6-prefer
    uuid: 59f2503a-9506-4c14-9293-bbb4964a75b8
    alterId: 0
    cipher: chacha20-poly1305
    network: ws
    ws-opts:
      path: /Video-data
      headers:
        Host: 45.144.52.52
      v2ray-http-upgrade: true
    tls: false
    udp: true
    tcp-fast-open: true
  - name: "SaleDedic-F"
    type: vless
    server: 109.122.201.73
    port: 443
    ip-version: ipv6-prefer
    uuid: b8dec966-bb51-4597-9bde-c6ce86eaf00b
    network: ws
    ws-opts:
      path: /Video-data
      headers:
        Host: salededic-swe.ddns.net
      v2ray-http-upgrade: true
    tls: true
    client-fingerprint: chrome
    udp: true
    tcp-fast-open: true
  - name: "SaleDedic-VM-F"
    type: vmess
    server: 109.122.201.73
    port: 64709
    ip-version: ipv6-prefer
    uuid: a4ffa61e-07ab-4b77-b78d-f0939559d8f8
    alterId: 0
    cipher: chacha20-poly1305
    network: ws
    ws-opts:
      path: /Video-data
      headers:
        Host: 109.122.201.73
      v2ray-http-upgrade: true
    tls: false
    udp: true
    tcp-fast-open: true
  - name: "Waicore-Ger"
    type: vless
    server: 193.233.134.245
    port: 443
    ip-version: ipv6-prefer
    uuid: 1db7c946-f9d6-4cfd-86b6-a4bcef67384c
    network: ws
    ws-opts:
      path: /Video-data
      headers:
        Host: waicore-ger.ddns.net
      v2ray-http-upgrade: true
    tls: true
    servername: waicore-ger.ddns.net
    client-fingerprint: chrome
    udp: true
    tcp-fast-open: true
  - name: "Waicore-VM-Ger"
    type: vmess
    server: 193.233.134.245
    port: 62910
    ip-version: ipv6-prefer
    uuid: 99d0d9fe-a212-46ab-bf9a-cf1c113339bd
    alterId: 0
    cipher: chacha20-poly1305
    network: ws
    ws-opts:
      path: /Video-data
      headers:
        Host: 193.233.134.245
      v2ray-http-upgrade: true
    tls: false
    udp: true
    tcp-fast-open: true

proxy-groups:
  - name: "PROXY"
    type: select
    proxies:
      - HostingVDS
      - HostingVDS-VM
      - HostingVDS-Hys
      - HostingVDS-SS
      - HostVDS
      - HostVDS-VM
      - Aeza
      - Aeza-VM
      - H2nexus-F
      - H2nexus-VM-F
      - SaleDedic-F
      - SaleDedic-VM-F
      - Waicore-Ger
      - Waicore-VM-Ger

rule-providers:
  geosite-yandex:
    type: http
    behavior: domain
    format: mrs
    url: "https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/yandex.mrs"
    path: ./geosite-yandex.mrs
    interval: 86400
  geosite-vk:
    type: http
    behavior: domain
    format: mrs
    url: "https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/vk.mrs"
    path: ./geosite-vk.mrs
    interval: 86400
  geosite-mailru:
    type: http
    behavior: domain
    format: mrs
    url: "https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/mailru.mrs"
    path: ./geosite-mailru.mrs
    interval: 86400
  geosite-google:
    type: http
    behavior: domain
    format: mrs
    url: "https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/google.mrs"
    path: ./geosite-google.mrs
    interval: 86400  
  geosite-apple:
    type: http
    behavior: domain
    format: mrs
    url: "https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/apple.mrs"
    path: ./geosite-apple.mrs
    interval: 86400
  geosite-facebook:
    type: http
    behavior: domain
    format: mrs
    url: "https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/facebook.mrs"
    path: ./geosite-facebook.mrs
    interval: 86400
  geosite-instagram:
    type: http
    behavior: domain
    format: mrs
    url: "https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/instagram.mrs"
    path: ./geosite-instagram.mrs
  geosite-whatsapp:
    type: http
    behavior: domain
    format: mrs
    url: "https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/whatsapp.mrs"
    path: ./geosite-whatsapp.mrs   
    interval: 86400
  geosite-oculus:
    type: http
    behavior: domain
    format: mrs
    url: "https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/oculus.mrs"
    path: ./geosite-oculus.mrs   
    interval: 86400
  geosite-telegram:
    type: http
    behavior: domain
    format: mrs
    url: "https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/telegram.mrs"
    path: ./geosite-telegram.mrs   
    interval: 86400
  geosite-youtube:
    type: http
    behavior: domain
    format: mrs
    url: "https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/youtube.mrs"
    path: ./geosite-youtube.mrs   
    interval: 86400
  geosite-openai:
    type: http
    behavior: domain
    format: mrs
    url: "https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/openai.mrs"
    path: ./geosite-openai.mrs   
    interval: 86400
  geosite-google-gemini:
    type: http
    behavior: domain
    format: mrs
    url: "https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/google-gemini.mrs"
    path: ./geosite-google-gemini.mrs   
    interval: 86400
  geosite-xai:
    type: http
    behavior: domain
    format: mrs
    url: "https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/xai.mrs"
    path: ./geosite-xai.mrs   
    interval: 86400
  geosite-tiktok:
    type: http
    behavior: domain
    format: mrs
    url: "https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/tiktok.mrs"
    path: ./geosite-tiktok.mrs   
    interval: 86400
  geosite-discord:
    type: http
    behavior: domain
    format: mrs
    url: "https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/discord.mrs"
    path: ./geosite-discord.mrs  
    interval: 86400
  geosite-microsoft:
    type: http
    behavior: domain
    format: mrs
    url: "https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/microsoft.mrs"
    path: ./geosite-microsoft.mrs
    interval: 86400
  geosite-netflix:
    type: http
    behavior: domain
    format: mrs
    url: "https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/netflix.mrs"
    path: ./geosite-netflix.mrs
    interval: 86400
  geosite-spotify:
    type: http
    behavior: domain
    format: mrs
    url: "https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/spotify.mrs"
    path: ./geosite-spotify.mrs
    interval: 86400      
  geoip-facebook:
    type: http
    behavior: ipcidr
    format: mrs
    url: "https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geoip/facebook.mrs"
    path: ./geoip-facebook.mrs
    interval: 86400  
  geoip-google:
    type: http
    behavior: ipcidr
    format: mrs
    url: "https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geoip/google.mrs"
    path: ./geoip-google.mrs
    interval: 86400
  geoip-telegram:
    type: http
    behavior: ipcidr
    format: mrs
    url: "https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geoip/telegram.mrs"
    path: ./geoip-telegram.mrs
    interval: 86400
  geoip-twitter:
    type: http
    behavior: ipcidr
    format: mrs
    url: "https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geoip/twitter.mrs"
    path: ./geoip-twitter.mrs
    interval: 86400
  geoip-apple:
    type: http
    behavior: ipcidr
    format: mrs
    url: "https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo-lite/geoip/apple.mrs"
    path: ./geoip-apple.mrs
    interval: 86400
  geoip-netflix:
    type: http
    behavior: ipcidr
    format: mrs
    url: "https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo-lite/geoip/netflix.mrs"
    path: ./geoip-netflix.mrs
    interval: 86400
  geoip-discord-voice:
    type: http
    behavior: ipcidr
    format: mrs
    url: "https://github.com/legiz-ru/mihomo-rule-sets/raw/refs/heads/main/other/discord-voice-ip-list.mrs"
    path: ./geoip-discord-voice.mrs
    interval: 86400        
  geoip-ru:
    type: http
    behavior: ipcidr
    format: mrs
    url: "https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geoip/ru.mrs"
    path: ./geoip-ru.mrs
    interval: 86400

rules:
  - DST-PORT,25,DIRECT
  - DST-PORT,465,DIRECT
  - DST-PORT,587,DIRECT
  - DST-PORT,993,DIRECT
  - DST-PORT,995,DIRECT
  - DST-PORT,18090,DIRECT
  - DST-PORT,18092,DIRECT
  - DST-PORT,59090,DIRECT
  - DST-PORT,2195,DIRECT #push уведомления
  - DST-PORT,2196,DIRECT
  - DST-PORT,2197,DIRECT
  - DST-PORT,5223,DIRECT
  - DST-PORT,5228,DIRECT
  - DST-PORT,5229,DIRECT
  - DST-PORT,5230,DIRECT # конец push уведомлений
  - IP-CIDR,10.0.0.0/8,DIRECT,no-resolve
  - IP-CIDR,127.0.0.0/8,DIRECT,no-resolve
  - IP-CIDR,172.16.0.0/12,DIRECT,no-resolve
  - IP-CIDR,192.168.0.0/16,DIRECT,no-resolve
  - IP-CIDR,95.165.6.169/32,DIRECT,no-resolve
  - IP-CIDR,::1/128,DIRECT
  # Apple Push Notifications
  - DOMAIN-SUFFIX,push.apple.com,DIRECT
  - DOMAIN,push.apple.com,DIRECT
  - DOMAIN-SUFFIX,api.push.apple.com,DIRECT
  - DOMAIN,gateway.push.apple.com,DIRECT
  - DOMAIN,gateway.sandbox.push.apple.com,DIRECT
  # Google/Firebase Push Notifications
  - DOMAIN-SUFFIX,fcm.googleapis.com,DIRECT
  - DOMAIN,fcm.googleapis.com,DIRECT
  - DOMAIN-SUFFIX,android.googleapis.com,DIRECT
  - DOMAIN,android.googleapis.com,DIRECT
  
  - RULE-SET,geosite-yandex,DIRECT
  - RULE-SET,geosite-vk,DIRECT
  - RULE-SET,geosite-mailru,DIRECT
  
  - RULE-SET,geosite-google,PROXY
  - RULE-SET,geosite-apple,PROXY
  - RULE-SET,geosite-facebook,PROXY
  - RULE-SET,geosite-instagram,PROXY
  - RULE-SET,geosite-whatsapp,PROXY
  - RULE-SET,geosite-oculus,PROXY
  - RULE-SET,geosite-telegram,PROXY
  - RULE-SET,geosite-youtube,PROXY
  - RULE-SET,geosite-openai,PROXY
  - RULE-SET,geosite-google-gemini,PROXY
  - RULE-SET,geosite-xai,PROXY
  - RULE-SET,geosite-tiktok,PROXY
  - RULE-SET,geosite-discord,PROXY
  - RULE-SET,geosite-microsoft,PROXY
  - RULE-SET,geosite-netflix,PROXY
  - RULE-SET,geosite-spotify,PROXY

  - RULE-SET,geoip-google,PROXY
  - RULE-SET,geoip-facebook,PROXY
  - RULE-SET,geoip-telegram,PROXY
  - RULE-SET,geoip-twitter,PROXY
  - RULE-SET,geoip-apple,PROXY
  - RULE-SET,geoip-netflix,PROXY
  - RULE-SET,geoip-discord-voice,PROXY
  
  - DOMAIN,kino.pub,PROXY
  - DOMAIN-KEYWORD,habr,PROXY
  - DOMAIN-SUFFIX,themoviedb.org,PROXY
  - DOMAIN-SUFFIX,tmbd.org,PROXY
  - DOMAIN-SUFFIX,themoviedb.org,PROXY
  - DOMAIN-SUFFIX,tmdb-image-prod.b-cdn.net,PROXY
  - DOMAIN-SUFFIX,cdn.cookielaw.org,PROXY
  
  - DOMAIN-SUFFIX,ru,DIRECT
  - DOMAIN-SUFFIX,su,DIRECT
  - DOMAIN-SUFFIX,vokino.tv,DIRECT
  - DOMAIN-SUFFIX,yandex.net,DIRECT
  - DOMAIN,polons.synology.me,DIRECT
  - DOMAIN,evpolondacha.keenetic.link,DIRECT
  - DOMAIN,evpolondom.keenetic.name,DIRECT
  - RULE-SET,geoip-ru,DIRECT
  #- GEOIP,RU,DIRECT
  - MATCH,PROXY
