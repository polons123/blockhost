mode: rule
mixed-port: 7897
allow-lan: true
log-level: error
ipv6: false
external-controller: 0.0.0.0:59095
secret: 'Na.pole.tanki'
external-ui: ./ui
external-ui-url: "https://github.com/Zephyruso/zashboard/releases/latest/download/dist.zip"
external-controller-cors:
  allow-private-network: true
  allow-origins:
  - '*'
unified-delay: false
tcp-concurrent: false
find-process-mode: strict

dns:
  enable: true
  cache-algorithm: arc
  prefer-h3: false
  ipv6: false
  listen: :53
  default-nameserver:
  - 77.88.8.8
  - system
  nameserver:
  - tls://cloud-ru-fr.ydns.eu:853
  - tls://vdska-fin.ydns.eu:853
  # - tls://vdska-fin.ydns.eu:853
  # - https://vdska-pl.ydns.eu/dns-query
  proxy-server-nameserver:
  - tls://cloud-ru-fr.ydns.eu:853
  - tls://vdska-fin.ydns.eu:853
  # - tls://vdska-fin.ydns.eu:853
  # - https://vdska-pl.ydns.eu/dns-query
  respect-rules: false
  use-hosts: false
  use-system-hosts: false
  direct-nameserver-follow-policy: false
  enhanced-mode: fake-ip # redir-host  or fake-ip
  fake-ip-filter:
  # LAN –¥–æ–º–µ–Ω—ã
  - '+.lan'
  - '+.localdomain'
  - '+.example'
  - '+.invalid'
  - '+.localhost'
  - '+.test'
  - '+.local'
  - '+.home.arpa'
  - '+.direct'
    
  # NTP —Å–µ—Ä–≤–∏—Å—ã (—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –≤—Ä–µ–º–µ–Ω–∏)
  - 'time.*.com'
  - 'time.*.gov'
  - 'time.*.edu.cn'
  - 'time.*.apple.com'
  - 'time-ios.apple.com'
  - 'time1.*.com'
  - 'time2.*.com'
  - 'time3.*.com'
  - 'time4.*.com'
  - 'time5.*.com'
  - 'time6.*.com'
  - 'time7.*.com'
  - 'ntp.*.com'
  - 'ntp1.*.com'
  - 'ntp2.*.com'
  - 'ntp3.*.com'
  - 'ntp4.*.com'
  - 'ntp5.*.com'
  - 'ntp6.*.com'
  - 'ntp7.*.com'
  - '+.time.edu.cn'
  - '+.ntp.org.cn'
  - '+.pool.ntp.org'
  # –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å–∏—Å—Ç–µ–º–Ω—ã–µ –¥–æ–º–µ–Ω—ã
  - '+.msftconnecttest.com'
  - '+.connectivitycheck.gstatic.com'
  - 'captive.apple.com'
  - 'detectportal.firefox.com'
  fake-ip-filter-mode: blacklist
  fake-ip-range: 198.18.0.1/16
profile:
  store-selected: true
  store-fake-ip: false

tun:
  enable: true
  stack: system
  mtu: 1500
  auto-route: true
  strict-route: true
  gso: false
  # gso-max-size: 65536
  udp-timeout: 300
  iproute2-table-index: 2022
  iproute2-rule-index: 9000
  endpoint-independent-nat: false
  auto-detect-interface: true
  dns-hijack:
  - any:53
  - tcp://any:53
  device: utun11
  route-exclude-address:
  - 0.0.0.0/8
  - 100.64.0.0/10
  - 127.0.0.0/8
  - 169.254.0.0/16
  - 172.16.0.0/12
  - 192.0.0.0/24
  - 192.0.2.0/24
  - 192.88.99.0/24
  - 192.168.0.0/16
  - 198.51.100.0/24
  - 203.0.113.0/24
  - 224.0.0.0/4
  - 255.255.255.255/32
  - 239.255.255.250/32

#  TCP keep alive interval
#  15  –¥–ª—è –∫–æ–º–ø—å—é—Ç–µ—Ä–∞
#  1800 –¥–ª—è —Ç–µ–ª–µ—Ñ–æ–Ω–∞, —É–≤–µ–ª–∏—á–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞ —ç–∫–æ–Ω–æ–º–∏—Ç –±–∞—Ç–∞—Ä–µ—é 
keep-alive-interval: 10
keep-alive-idle: 10
#disable-keep-alive: true

sniffer:
  enable: true
  sniff:
    HTTP:
      ports: [80, 8080-8880]
      override-destination: true
    TLS:
      ports: [443, 8443]
      override-destination: true
    QUIC:
      ports: [443, 8443]
      override-destination: true
  skip-domain:
    - "+.push.apple.com"

listeners:
  - name: ss-in
    type: shadowsocks
    port: 64850
    listen: 0.0.0.0
    cipher: 2022-blake3-chacha20-poly1305
    password: JQs1ueGrJERWAJAVI7C25El8Vu5NWwYatyCF/lrjVJE=
    udp: true
        
proxies:
      
  - name: CloudVK-hys
    type: hysteria2
    server: 212.233.78.4
    port: 8443
    password: wDRp8/cK4TIlLl6z2t/RrgtUu1lkIQ0nCi9lzwudZRY=
    up: "0 Mbps"
    down: "0 Mbps"
    sni: "cloudvk.ydns.eu"
    skip-cert-verify: false
    #fingerprint: xxxx
    alpn:
      - h3
    ip-version: ipv4
    congestion-control: brutal
    brutal-opts:
      enabled: true
      up: "0 Mbps"
      down: "0 Mbps"
  
  - name: CloudVK-Tr
    type: trojan
    server: 212.233.78.4
    port: 443
    password: bb08f215-cbc4-4db5-8925-ce274dd71b04
    udp: true
    sni: cloudvk.ydns.eu
    alpn:
    - h2
    - http/1.1
    skip-cert-verify: false
    network: ws
    ws-opts:
      path: /Video-data
      headers:
        Host: cloudvk.ydns.eu
      max-early-data:
      early-data-header-name:
      v2ray-http-upgrade: true
      v2ray-http-upgrade-fast-open: true
    smux:
      enabled: true
      protocol: smux
      #max-connections: 8
      #min-streams: 4
      max-streams: 128
      statistic: false
      only-tcp: false
      padding: false
    ip-version: ipv4
    client-fingerprint: random

  - name: CloudVK-ss
    type: ss
    server: 212.233.78.4
    port: 64850
    cipher: 2022-blake3-chacha20-poly1305
    password: JQs1ueGrJERWAJAVI7C25El8Vu5NWwYatyCF/lrjVJE=
    udp: true
    smux:
      enabled: true
      protocol: smux
      #max-connections: 8
      #min-streams: 4
      max-streams: 128
      statistic: false
      only-tcp: false
      padding: false
    ip-version: ipv4

  - name: CloudVK-Vm
    type: vmess
    server: 212.233.78.4
    port: 64851
    uuid: 59f2503a-9506-4c14-9293-bbb4964a75b8
    alterId: 0
    cipher: auto
    udp: true
    network: ws
    ws-opts:
      path: /Video-data
      headers:
        Host: cloudvk.ydns.eu
      max-early-data:
      early-data-header-name:
      v2ray-http-upgrade: true
      v2ray-http-upgrade-fast-open: true
    smux:
      enabled: true
      protocol: smux
      #max-connections: 8
      #min-streams: 4
      max-streams: 128
      statistic: false
      only-tcp: false
      padding: false
    ip-version: ipv4
    client-fingerprint: random

  - name: CloudVK-Vl
    type: vless
    server: 212.233.78.4
    port: 10443
    uuid: b68ab9f0-60a2-43bb-befb-ea72cc9400b2
    udp: true
    tls: true
    servername: cloudvk.ydns.eu
    alpn:
      - h2
      - http/1.1
    skip-cert-verify: false
    network: ws
    ws-opts:
      path: /Video-data
      headers:
        Host: cloudvk.ydns.eu
      max-early-data:
      early-data-header-name:
      v2ray-http-upgrade: true
      v2ray-http-upgrade-fast-open: true
    smux:
      enabled: true
      protocol: smux
      #max-connections: 8
      #min-streams: 4
      max-streams: 128
      statistic: false
      only-tcp: false
      padding: false
    ip-version: ipv4
    client-fingerprint: random

  - name: Socks-local
    type: socks5
    server: 192.168.1.151
    port: 7897
    udp: true
    
  - name: Dom-ss
    type: ss
    server: 95.165.6.169
    port: 64850
    cipher: 2022-blake3-chacha20-poly1305
    password: JQs1ueGrJERWAJAVI7C25El8Vu5NWwYatyCF/lrjVJE=
    udp: true
    smux:
      enabled: false
    ip-version: ipv4

  - name: Selectel-hys
    type: hysteria2
    server: 188.68.221.199
    port: 8443
    password: wDRp8/cK4TIlLl6z2t/RrgtUu1lkIQ0nCi9lzwudZRY=
    up: "0 Mbps"
    down: "0 Mbps"
    sni: "selectel-spb.ydns.eu"
    skip-cert-verify: false
    #fingerprint: xxxx
    alpn:
      - h3
    ip-version: ipv4
    congestion-control: brutal
    brutal-opts:
      enabled: true
      up: "0 Mbps"
      down: "0 Mbps"

  - name: Selectel-Tr
    type: trojan
    server: 188.68.221.199
    port: 443
    password: bb08f215-cbc4-4db5-8925-ce274dd71b04
    udp: true
    sni: selectel-spb.ydns.eu
    alpn:
    - h2
    - http/1.1
    skip-cert-verify: false
    network: ws
    ws-opts:
      path: /Video-data
      headers:
        Host: selectel-spb.ydns.eu
      max-early-data:
      early-data-header-name:
      v2ray-http-upgrade: true
      v2ray-http-upgrade-fast-open: true
    smux:
      enabled: true
      protocol: smux
      #max-connections: 8
      #min-streams: 4
      max-streams: 128
      statistic: false
      only-tcp: false
      padding: false
    ip-version: ipv4
    client-fingerprint: random
  
  - name: Selectel-ss
    type: ss
    server: 188.68.221.199
    port: 64850
    cipher: 2022-blake3-chacha20-poly1305
    password: JQs1ueGrJERWAJAVI7C25El8Vu5NWwYatyCF/lrjVJE=
    udp: true
    mux:
      enabled: true
      protocol: smux
      #max-connections: 8
      #min-streams: 4
      max-streams: 128
      statistic: false
      only-tcp: false
      padding: false
    ip-version: ipv4
    client-fingerprint: random

  - name: Selectel-Vm
    type: vmess
    server: 188.68.221.199
    port: 64851
    uuid: 59f2503a-9506-4c14-9293-bbb4964a75b8
    alterId: 0
    cipher: auto
    udp: true
    network: ws
    ws-opts:
      path: /Video-data
      headers:
        Host: selectel-spb.ydns.eu
      max-early-data:
      early-data-header-name:
      v2ray-http-upgrade: true
      v2ray-http-upgrade-fast-open: true
    smux:
      enabled: true
      protocol: smux
      #max-connections: 8
      #min-streams: 4
      max-streams: 128
      statistic: false
      only-tcp: false
      padding: false
    ip-version: ipv4
    client-fingerprint: random

  - name: Selectel-Vl
    type: vless
    server: 188.68.221.199
    port: 10443
    uuid: b68ab9f0-60a2-43bb-befb-ea72cc9400b2
    udp: true
    tls: true
    servername: selectel-spb.ydns.eu
    alpn:
      - h2
      - http/1.1
    skip-cert-verify: false
    network: ws
    ws-opts:
      path: /Video-data
      headers:
        Host: selectel-spb.ydns.eu
      max-early-data:
      early-data-header-name:
      v2ray-http-upgrade: true
      v2ray-http-upgrade-fast-open: true
    smux:
      enabled: true
      protocol: smux
      #max-connections: 8
      #min-streams: 4
      max-streams: 128
      statistic: false
      only-tcp: false
      padding: false
    ip-version: ipv4
    client-fingerprint: random

  - name: H2nexus-hys
    type: hysteria2
    server: 45.144.52.52
    port: 8443
    password: wDRp8/cK4TIlLl6z2t/RrgtUu1lkIQ0nCi9lzwudZRY=
    up: "0 Mbps"
    down: "0 Mbps"
    sni: "h2nexus.ddns.net"
    skip-cert-verify: false
    #fingerprint: xxxx
    alpn:
      - h3
    ip-version: ipv4
    congestion-control: brutal
    brutal-opts:
      enabled: true
      up: "0 Mbps"
      down: "0 Mbps"

  - name: H2nexus-Tr
    type: trojan
    server: 45.144.52.52
    port: 443
    password: bb08f215-cbc4-4db5-8925-ce274dd71b04
    udp: true
    sni: h2nexus.ddns.net
    alpn:
    - h2
    - http/1.1
    client-fingerprint: random
    skip-cert-verify: false
    network: tcp
    smux:
      enabled: false
    ip-version: ipv4

  - name: H2nexus-ss
    type: ss
    server: 45.144.52.52
    port: 64850
    cipher: 2022-blake3-chacha20-poly1305
    password: JQs1ueGrJERWAJAVI7C25El8Vu5NWwYatyCF/lrjVJE=
    udp: true
    smux:
      enabled: false
    ip-version: ipv4

  - name: H2nexus-Pol-hys
    type: hysteria2
    server: 144.31.0.59
    port: 8443
    password: wDRp8/cK4TIlLl6z2t/RrgtUu1lkIQ0nCi9lzwudZRY=
    up: "0 Mbps"
    down: "0 Mbps"
    sni: "h2nexus-p.ydns.eu"
    skip-cert-verify: false
    #fingerprint: xxxx
    alpn:
      - h3
    ip-version: ipv4
    congestion-control: brutal
    brutal-opts:
      enabled: true
      up: "0 Mbps"
      down: "0 Mbps"
    
  - name: H2nexus-Pol-Tr
    type: trojan
    server: 144.31.0.59
    port: 443
    password: bb08f215-cbc4-4db5-8925-ce274dd71b04
    udp: true
    sni: h2nexus-p.ydns.eu
    alpn:
    - h2
    - http/1.1
    client-fingerprint: random
    skip-cert-verify: false
    network: tcp
    smux:
      enabled: false
    ip-version: ipv4

  - name: H2nexus-Pol-ss
    type: ss
    server: 144.31.0.59
    port: 64850
    cipher: 2022-blake3-chacha20-poly1305
    password: JQs1ueGrJERWAJAVI7C25El8Vu5NWwYatyCF/lrjVJE=
    udp: true
    smux:
      enabled: false
    ip-version: ipv4

  - name: Waicore-hys
    type: hysteria2
    server: 193.233.134.245
    port: 8443
    password: wDRp8/cK4TIlLl6z2t/RrgtUu1lkIQ0nCi9lzwudZRY=
    up: "0 Mbps"
    down: "0 Mbps"
    sni: "waicore-ger.ddns.net"
    skip-cert-verify: false
    #fingerprint: xxxx
    alpn:
      - h3
    ip-version: ipv4
    congestion-control: brutal
    brutal-opts:
      enabled: true
      up: "0 Mbps"
      down: "0 Mbps"

  - name: Waicore-Tr
    type: trojan
    server: 193.233.134.245
    port: 443
    password: bb08f215-cbc4-4db5-8925-ce274dd71b04
    udp: true
    sni: waicore-ger.ddns.net
    alpn:
    - h2
    - http/1.1
    client-fingerprint: random
    skip-cert-verify: false
    network: tcp
    smux:
      enabled: false
    ip-version: ipv4

  - name: Waicore-ss
    type: ss
    server: 193.233.134.245
    port: 64850
    cipher: 2022-blake3-chacha20-poly1305
    password: JQs1ueGrJERWAJAVI7C25El8Vu5NWwYatyCF/lrjVJE=
    udp: true
    smux:
      enabled: false
    ip-version: ipv4
    
proxy-groups:
  # =========================================================
  # 1. –ì–õ–ê–í–ù–´–ô –ü–ï–†–ï–ö–õ–Æ–ß–ê–¢–ï–õ–¨ (Logic Switch)
  # –í—ã–±–∏—Ä–∞–µ–º: –õ–∏–±–æ –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤—â–∏–∫, –ª–∏–±–æ —Ä—É—á–Ω–æ–π —Å–ø–∏—Å–æ–∫
  # =========================================================
  - name: "PROXY"
    type: select
    proxies:
      - "‚öñÔ∏è Load Balance-CloudVK"   # –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ
      - "‚öñÔ∏è Load Balance-Selectel"   # –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ
      - "üõ† Manual"         # –†—É—á–Ω–æ–π –≤—ã–±–æ—Ä –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞

  # =========================================================
  # 2. –ë–ê–õ–ê–ù–°–ò–†–û–í–©–ò–ö CloudVK
  # =========================================================
  - name: "‚öñÔ∏è Load Balance-CloudVK"
    type: load-balance
    strategy: consistent-hashing # "–õ–∏–ø–∫–∞—è" —Å–µ—Å—Å–∏—è (IP –Ω–µ —Å–∫–∞—á–µ—Ç –Ω–∞ –æ–¥–Ω–æ–º —Å–∞–π—Ç–µ)
    # –ï—Å–ª–∏ –Ω—É–∂–Ω–∞ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å –∑–∞–≥—Ä—É–∑–∫–∏ (—Ç–æ—Ä—Ä–µ–Ω—Ç—ã), –º–æ–∂–Ω–æ –ø–æ–º–µ–Ω—è—Ç—å –Ω–∞ round-robin
    url: 'http://www.gstatic.com/generate_204'
    interval: 30
    proxies:
      - CloudVK-Vl
      - CloudVK-ss

  # =========================================================
  # 3. –ë–ê–õ–ê–ù–°–ò–†–û–í–©–ò–ö Selectel
  # =========================================================
  - name: "‚öñÔ∏è Load Balance-Selectel"
    type: load-balance
    strategy: consistent-hashing # "–õ–∏–ø–∫–∞—è" —Å–µ—Å—Å–∏—è (IP –Ω–µ —Å–∫–∞—á–µ—Ç –Ω–∞ –æ–¥–Ω–æ–º —Å–∞–π—Ç–µ)
    # –ï—Å–ª–∏ –Ω—É–∂–Ω–∞ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å –∑–∞–≥—Ä—É–∑–∫–∏ (—Ç–æ—Ä—Ä–µ–Ω—Ç—ã), –º–æ–∂–Ω–æ –ø–æ–º–µ–Ω—è—Ç—å –Ω–∞ round-robin
    url: 'http://www.gstatic.com/generate_204'
    interval: 30
    proxies:
      - Selectel-Vl
      - Selectel-ss

  # =========================================================
  # 3. –†–£–ß–ù–û–ô –í–´–ë–û–† (–í—Å–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ –ø—Ä–æ–∫—Å–∏)
  # =========================================================
  - name: "üõ† Manual"
    type: select
    proxies:
      - CloudVK-hys
      - CloudVK-Tr
      - CloudVK-ss
      - CloudVK-Vm
      - CloudVK-Vl
      - Selectel-hys
      - Selectel-Tr
      - Selectel-ss
      - Selectel-Vm
      - Selectel-Vl
      - Socks-local
      - Dom-ss
      - H2nexus-hys
      - H2nexus-Tr
      - H2nexus-ss
      - H2nexus-Pol-hys
      - H2nexus-Pol-Tr
      - H2nexus-Pol-ss
      - Waicore-hys
      - Waicore-Tr
      - Waicore-ss
      
rule-providers:
  geosite-yandex:
    type: http
    behavior: domain
    format: mrs
    url: "https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/yandex.mrs"
    path: ./geosite-yandex.mrs
    interval: 86400
  geosite-vk:
    type: http
    behavior: domain
    format: mrs
    url: "https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/vk.mrs"
    path: ./geosite-vk.mrs
    interval: 86400
  geosite-mailru:
    type: http
    behavior: domain
    format: mrs
    url: "https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/mailru.mrs"
    path: ./geosite-mailru.mrs
    interval: 86400
  geosite-google:
    type: http
    behavior: domain
    format: mrs
    url: "https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/google.mrs"
    path: ./geosite-google.mrs
    interval: 86400  
  geosite-apple:
    type: http
    behavior: domain
    format: mrs
    url: "https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/apple.mrs"
    path: ./geosite-apple.mrs
    interval: 86400
  geosite-facebook:
    type: http
    behavior: domain
    format: mrs
    url: "https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/facebook.mrs"
    path: ./geosite-facebook.mrs
    interval: 86400
  geosite-instagram:
    type: http
    behavior: domain
    format: mrs
    url: "https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/instagram.mrs"
    path: ./geosite-instagram.mrs
  geosite-whatsapp:
    type: http
    behavior: domain
    format: mrs
    url: "https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/whatsapp.mrs"
    path: ./geosite-whatsapp.mrs   
    interval: 86400
  geosite-oculus:
    type: http
    behavior: domain
    format: mrs
    url: "https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/oculus.mrs"
    path: ./geosite-oculus.mrs   
    interval: 86400
  geosite-telegram:
    type: http
    behavior: domain
    format: mrs
    url: "https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/telegram.mrs"
    path: ./geosite-telegram.mrs   
    interval: 86400
  geosite-youtube:
    type: http
    behavior: domain
    format: mrs
    url: "https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/youtube.mrs"
    path: ./geosite-youtube.mrs   
    interval: 86400
  geosite-openai:
    type: http
    behavior: domain
    format: mrs
    url: "https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/openai.mrs"
    path: ./geosite-openai.mrs   
    interval: 86400
  geosite-google-gemini:
    type: http
    behavior: domain
    format: mrs
    url: "https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/google-gemini.mrs"
    path: ./geosite-google-gemini.mrs   
    interval: 86400
  geosite-xai:
    type: http
    behavior: domain
    format: mrs
    url: "https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/xai.mrs"
    path: ./geosite-xai.mrs   
    interval: 86400
  geosite-tiktok:
    type: http
    behavior: domain
    format: mrs
    url: "https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/tiktok.mrs"
    path: ./geosite-tiktok.mrs   
    interval: 86400
  geosite-discord:
    type: http
    behavior: domain
    format: mrs
    url: "https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/discord.mrs"
    path: ./geosite-discord.mrs  
    interval: 86400
  geosite-microsoft:
    type: http
    behavior: domain
    format: mrs
    url: "https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/microsoft.mrs"
    path: ./geosite-microsoft.mrs
    interval: 86400
  geosite-netflix:
    type: http
    behavior: domain
    format: mrs
    url: "https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/netflix.mrs"
    path: ./geosite-netflix.mrs
    interval: 86400
  geosite-spotify:
    type: http
    behavior: domain
    format: mrs
    url: "https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/spotify.mrs"
    path: ./geosite-spotify.mrs
    interval: 86400      
  geoip-facebook:
    type: http
    behavior: ipcidr
    format: mrs
    url: "https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geoip/facebook.mrs"
    path: ./geoip-facebook.mrs
    interval: 86400  
  geoip-google:
    type: http
    behavior: ipcidr
    format: mrs
    url: "https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geoip/google.mrs"
    path: ./geoip-google.mrs
    interval: 86400
  geoip-telegram:
    type: http
    behavior: ipcidr
    format: mrs
    url: "https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geoip/telegram.mrs"
    path: ./geoip-telegram.mrs
    interval: 86400
  geoip-twitter:
    type: http
    behavior: ipcidr
    format: mrs
    url: "https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geoip/twitter.mrs"
    path: ./geoip-twitter.mrs
    interval: 86400
  geoip-apple:
    type: http
    behavior: ipcidr
    format: mrs
    url: "https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo-lite/geoip/apple.mrs"
    path: ./geoip-apple.mrs
    interval: 86400
  geoip-netflix:
    type: http
    behavior: ipcidr
    format: mrs
    url: "https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo-lite/geoip/netflix.mrs"
    path: ./geoip-netflix.mrs
    interval: 86400
  geoip-discord-voice:
    type: http
    behavior: ipcidr
    format: mrs
    url: "https://github.com/legiz-ru/mihomo-rule-sets/raw/refs/heads/main/other/discord-voice-ip-list.mrs"
    path: ./geoip-discord-voice.mrs
    interval: 86400        
  geoip-ru:
    type: http
    behavior: ipcidr
    format: mrs
    url: "https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geoip/ru.mrs"
    path: ./geoip-ru.mrs
    interval: 86400

rules:
  #- RULE-SET,oisd_big,REJECT
  # –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ quic google ip
  # - AND,((RULE-SET,geoip-google),(NETWORK,udp),(DST-PORT,443)),REJECT
  - DOMAIN,kino.pub,PROXY
  - DOMAIN-KEYWORD,habr,PROXY
  - DOMAIN-SUFFIX,themoviedb.org,PROXY
  - DOMAIN-SUFFIX,tmdb.org,PROXY
  - DOMAIN-SUFFIX,themoviedb.org,PROXY
  - DOMAIN-SUFFIX,tmdb-image-prod.b-cdn.net,PROXY
  - PROCESS-NAME,uTorrent.exe,DIRECT
  - PROCESS-NAME,BitTorrent.exe,DIRECT
  - PROCESS-NAME,utweb.exe,DIRECT
  - PROCESS-NAME,btweb.exe,DIRECT
  - PROCESS-NAME,utorrentie.exe,DIRECT
  - PROCESS-NAME,bittorrentie.exe,DIRECT
  - PROCESS-NAME,qbittorrent.exe,DIRECT
  - PROCESS-NAME,deluge.exe,DIRECT
  - PROCESS-NAME,Azureus.exe,DIRECT
  - PROCESS-NAME,tixati.exe,DIRECT
  - PROCESS-NAME,transmission-qt.exe,DIRECT
  - PROCESS-NAME,transmission-daemon.exe,DIRECT
  - PROCESS-NAME,WebTorrent.exe,DIRECT
  - PROCESS-NAME,PicoTorrent.exe,DIRECT
  - PROCESS-NAME,FrostWire.exe,DIRECT
  - PROCESS-NAME,Tribler.exe,DIRECT
  - PROCESS-NAME,BitComet.exe,DIRECT
  - PROCESS-NAME,mediaget.exe,DIRECT
  - PROCESS-NAME,mediaget_crashpad_handler.exe,DIRECT
  - PROCESS-NAME,uFiler.exe,DIRECT
  - PROCESS-NAME,TorrServer-windows-386.exe,DIRECT
  - PROCESS-NAME,TorrServer-windows-amd64.exe,DIRECT
  - PROCESS-NAME,Transmission,DIRECT
  - PROCESS-NAME,qBittorrent,DIRECT
  - PROCESS-NAME,BitTorrent Web,DIRECT
  - PROCESS-NAME,BitTorrent,DIRECT
  - PROCESS-NAME,uTorrent Web,DIRECT
  - PROCESS-NAME,uTorrent,DIRECT
  - PROCESS-NAME,Folx,DIRECT
  - PROCESS-NAME,Deluge,DIRECT
  - PROCESS-NAME,Vuze,DIRECT
  - PROCESS-NAME,FrostWire,DIRECT
  - PROCESS-NAME,BiglyBT,DIRECT
  - PROCESS-NAME,BitLord,DIRECT
  - PROCESS-NAME,BitComet,DIRECT
  - PROCESS-NAME,bitlord,DIRECT
  - PROCESS-NAME,tribler,DIRECT
  - PROCESS-NAME,WebTorrent,DIRECT
  - PROCESS-NAME,WebTorrent Helper,DIRECT
  - PROCESS-NAME,WebTorrent Helper (GPU),DIRECT
  - PROCESS-NAME,WebTorrent Helper (Renderer),DIRECT
  - PROCESS-NAME,mediaget,DIRECT
  - PROCESS-NAME,fdm,DIRECT
  - PROCESS-NAME,Free Download Manager,DIRECT
  - PROCESS-NAME,qbittorrent,DIRECT
  - PROCESS-NAME,qbittorrent-nox,DIRECT
  - PROCESS-NAME,transmission-qt,DIRECT
  - PROCESS-NAME,transmission-gtk,DIRECT
  - PROCESS-NAME,transmission-daemon,DIRECT
  - PROCESS-NAME,deluged,DIRECT
  - PROCESS-NAME,deluge-gtk,DIRECT
  - PROCESS-NAME,fragments,DIRECT
  - PROCESS-NAME,tixati,DIRECT
  - PROCESS-NAME,frostwire,DIRECT
  - PROCESS-NAME,vuze,DIRECT
  - PROCESS-NAME,azureus,DIRECT
  - PROCESS-NAME,ktorrent,DIRECT
  - PROCESS-NAME,rtorrent,DIRECT
  - PROCESS-NAME,tribler,DIRECT
  - PROCESS-NAME,torrserver,DIRECT
  - PROCESS-NAME,EmbyServer.exe,DIRECT
  - PROCESS-NAME,embytray.exe,DIRECT
  - PROCESS-NAME-REGEX,.*plex.*,DIRECT
  - DST-PORT,25,DIRECT
  - DST-PORT,465,DIRECT
  - DST-PORT,587,DIRECT
  - DST-PORT,993,DIRECT
  - DST-PORT,995,DIRECT
  - DST-PORT,18090,DIRECT
  - DST-PORT,18092,DIRECT
  - DST-PORT,32400,DIRECT
  - DST-PORT,32401,DIRECT
  - IP-CIDR,10.0.0.0/8,DIRECT,no-resolve
  - IP-CIDR,127.0.0.0/8,DIRECT,no-resolve
  - IP-CIDR,172.16.0.0/12,DIRECT,no-resolve
  - IP-CIDR,192.168.0.0/16,DIRECT,no-resolve
  - IP-CIDR,95.165.6.169/32,DIRECT,no-resolve
  - IP-CIDR,::1/128,DIRECT
  
  - RULE-SET,geosite-yandex,DIRECT
  - RULE-SET,geosite-vk,DIRECT
  - RULE-SET,geosite-mailru,DIRECT
  
  - RULE-SET,geosite-google,PROXY
  - RULE-SET,geosite-apple,PROXY
  - RULE-SET,geosite-facebook,PROXY
  - RULE-SET,geosite-instagram,PROXY
  - RULE-SET,geosite-whatsapp,PROXY
  - RULE-SET,geosite-oculus,PROXY
  - RULE-SET,geosite-telegram,PROXY
  - RULE-SET,geosite-youtube,PROXY
  - RULE-SET,geosite-openai,PROXY
  - RULE-SET,geosite-google-gemini,PROXY
  - RULE-SET,geosite-xai,PROXY
  - RULE-SET,geosite-tiktok,PROXY
  - RULE-SET,geosite-discord,PROXY
  - RULE-SET,geosite-microsoft,PROXY
  - RULE-SET,geosite-netflix,PROXY
  - RULE-SET,geosite-spotify,PROXY

  - RULE-SET,geoip-google,PROXY
  - RULE-SET,geoip-facebook,PROXY
  - RULE-SET,geoip-telegram,PROXY
  - RULE-SET,geoip-twitter,PROXY
  - RULE-SET,geoip-apple,PROXY
  - RULE-SET,geoip-netflix,PROXY
  - RULE-SET,geoip-discord-voice,PROXY
  
  - DOMAIN-KEYWORD,plex,DIRECT
  - DOMAIN-SUFFIX,ru,DIRECT
  - DOMAIN-SUFFIX,su,DIRECT
  - DOMAIN-SUFFIX,xn--p1ai,DIRECT
  - DOMAIN-SUFFIX,vokino.tv,DIRECT
  - DOMAIN-SUFFIX,yandex.net,DIRECT
  - DOMAIN,polons.synology.me,DIRECT
  - DOMAIN,evpolondacha.keenetic.link,DIRECT
  - DOMAIN,evpolondom.keenetic.name,DIRECT
  - RULE-SET,geoip-ru,DIRECT
  #- GEOIP,RU,DIRECT
  - MATCH,PROXY
